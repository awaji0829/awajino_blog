{"componentChunkName":"component---src-templates-blog-post-js","path":"/about-ssr/","result":{"data":{"site":{"siteMetadata":{"title":"MINJI'S PLAYGROUND"}},"markdownRemark":{"id":"9d87104d-4363-55fd-b7ec-e477aeb8a378","excerpt":"뭐든지 시작할때는 바닥부터 올라가야 이해할 수 있다고 느끼는 요즘이다. 1. react + typescript + babel 우선 간단한 리액트 앱을 만든다.  타입스크립트도 이왕에 챙겨준다.  app.tsx 와 index.tsx 를 작성해준다. index.tsx tsconfig…","html":"<!-- CSR에 열광하던 시기를 지나 다시 SSR을 위해 다양한 프레임워크에서 변화가 일어나고 있다.\n새로운 기술이 나오면 화두에 오르다 그 기술의 단점이 점점 부각될때 그를 보완하는 또 다른 신기술이 나오는 형태로\n프론트엔드는 끊임없이 발전하고 있다. 여기에 더불어 GPT 와 함께라면 머리 아프게 로직을 고민하지 않아도 최소한 레퍼런스 형태 그 이상으로 코드를 작성해준다.\n\n이렇게 되면 개발자는 필요 없어지겠다 생각했지만, 아직은 좀 더 두고봐야 할 일이다.\n내가 마주하고 있는 대부분의 것들은 인간의 머릿속에서 나오고 있다. AI 가 모든걸 대체할 수 있겠지만 그 대체한 것에 어떤 문제점이 도사리고 있을지는 모를일이기 때문이다.\n\n앞으로 대체될 수 있는 개발자는 무수히 많을것이고 나도 그 중 한명이 될 수도 있다.\n누가 대체할 수 없을까 생각해보았다. 내 결론은 핵심을 알고 있는 사람이다.\n그것이 비즈니스의 핵심이 될 수 있고 코드 로직의 핵심이 될 수 있다.\n\n그리고 나는 핵심적인 것들을 파악하는 능력을 기르고자 한다. 앞으로 next.js 가 더욱 더 발전하든 previous.js 가 나오든\n해당 프레임워크가 생겨난 이유와 동작원리를 알고 있다면 앞으로 나올 프레임워크도 예측가능한 상태로 만들 수 있다고 생각한다.\n\n서론이 길었지만 사실 그냥 한번 궁금해서 해보고 싶었다.\nreact로 next.js 를 사용하지 않고 서버사이드 렌더링을 해보려고 한다. -->\n<p>뭐든지 시작할때는 바닥부터 올라가야 이해할 수 있다고 느끼는 요즘이다.</p>\n<h3>1. react + typescript + babel</h3>\n<p>우선 간단한 리액트 앱을 만든다. <br/></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add react react-dom</code></pre></div>\n<p>타입스크립트도 이왕에 챙겨준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add typescript\nyarn add --dev @types/react @types/react-dom tslint</code></pre></div>\n<br/>\n<p><code class=\"language-text\">yarn tsc --init</code></p>\n<p>app.tsx 와 index.tsx 를 작성해준다.</p>\n<p>index.tsx</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> rootElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>tsconfig</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typescript-tslint-plugin\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 타입스크립트가 컴파일러가 생성할 자바스크립트 코드 버전</span>\n    <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"preserve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"allowSyntheticDefaultImports\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"strict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"forceConsistentCasingInFileNames\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"skipLibCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 target 과 module 을 <code class=\"language-text\">esnext</code> 로 설정하고<br/>\nmoduleResolution 을 <code class=\"language-text\">node</code> 로 설정한다</p>\n<p>타입스크립트 파일은 컴파일 후에 자바스크립트로 변환되고 babel이 읽는다.</p>\n<p>babel은 기본적으로 es모듈 구문을 처리하도록 설계되어 있다.\n저렇게 설정하지 않으면 타입스크립트가 CommonJS 혹은 다른 모듈 시스템으로 변환할 수 있기 때문에 바벨이 정상적으로 작동하지 않을 수 있다.</p>\n<p>물론 babel.config.json 에서도 @babel/preset-typescript 를 사용하여\n타입스크립트를 처리하도록 설정해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">module.exports = <span class=\"token punctuation\">{</span>\n  presets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"@babel/preset-react\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"@babel/preset-typescript\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2. webpack</h3>\n<p>webpack5로 깔아주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">yarn add --dev webpack webpack-cli webpack-dev-server html-webpack-plugin babel-loader ts-loader</code></pre></div>\n<p>그리고 webpack.cofing.js 와 webpack.dev.js 생성해준다.</p>\n<p>webapck.config.js 에 먼저 도달해 어떤 파일로 갈지 라우팅 역할을 한다. <br/>\nclient와 server 는 ssr 용\ndev 는 csr 로 쓰일것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">env</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> client<span class=\"token punctuation\">,</span> dev <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> env<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./webpack.client</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>dev<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./webpack.dev</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./webpack.server</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> webpack <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> HtmlWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">'./src/index.tsx'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">historyApiFallback</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">static</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">directory</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'public'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//개발 서버가 제공할 정적파일 디렉토리</span>\n      <span class=\"token literal-property property\">publicPath</span><span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.tsx?$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ts-loader'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//WDS 가 서브하는 파일은 js 이므로 모두 ts, js 모두 넣어준다</span>\n    <span class=\"token literal-property property\">extensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.jsx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.tsx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>HotModuleReplacementPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 새로고침 없이 변경사항 반영</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">HtmlWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">template</span><span class=\"token operator\">:</span> <span class=\"token string\">'public/index_dev.html'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// html 파일을 자동으로 생성하고 관리</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그리고 위 처럼 설정한대로 public 폴더에 index_dev.html 파일을 작성해준다</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token constant\">DOCTYPE</span> html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"en\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>meta charset<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"format-detection\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"telephone=no\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"viewport\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"width=device-width, user-scalable=no\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>meta\n      name<span class=\"token operator\">=</span><span class=\"token string\">\"description\"</span>\n      content<span class=\"token operator\">=</span><span class=\"token string\">\"React + Typescript + SSR + Code-splitting\"</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"google\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"notranslate\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>Hello World<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\n\n  <span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"root\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></code></pre></div>\n<p>++router <br/>\n여기서 react-router 와 react-helmet 그리고 관련타입을 깔아주고 <br/></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">yarn add react-router-dom react-helmet\nyarn add --dev @types/react-router-dom @types/react-helmet</code></pre></div>\n<p>n개의 페이지를 만들고 각각 페이지마다 헬멧컴포넌트 안에 타이틀을 넣어주면 <br/>각 페이지마다 title 이 바뀌는 것을\n볼 수 있다. csr과 ssr 에서 손쉽게 html 문서의 header 섹션을 관리해준다. <br/>\n회사에서도 SEO 차원에서 비슷한 방식으로 사용하였고 봇이 각 페이지마다의 타이틀을 읽어 검색엔진에 우리 사이트를 효과적으로 노출해주었다.</p>\n<h3>3. SSR</h3>\n<p>이제 리액트 앱을 구성하였으니 서버사이드렌더링을 구현해본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">yarn add express\nyarn add --dev webpack-dev-middleware webpack-hot-middleware webpack-node-externals @types/express @types/webpack-dev-middleware @types/webpack-hot-middleware @types/webpack-env</code></pre></div>\n<p><code class=\"language-text\">Webpack-dev-middleware(WDM)</code> 은 웹팩의 번들링 결과물을 실시간으로 메모리에 저장하고 개발중인 애플리케이션에 제공하는 미들웨어다.\nmemory-fs 를 이용해 번들파일을 디스크가 아닌 메모리에 저장하기 때문에 빠른속도로 서빙할 수 있다</p>\n<p>(memory-fs : Node.js 환경에서 파일 시스템을 메모리에 저장하여 사용하는 가상 파일 시스템 라이브러리. 이는 실제 디스크에 파일을 기록하지 않고, 대신 메모리에 파일을 저장하고 읽는 방식으로 작동)</p>\n<p><code class=\"language-text\">webpack-hot-middleware(WHM)</code> 변경된 파일정보를 브라우저에 갱신시킨다</p>\n<ol>\n<li>\n<p>파일 변경</p>\n</li>\n<li>\n<p>WDM 이 메모리에 파일 변경점을 메모리에 저장, 개발 서버에 빠르게 제공</p>\n</li>\n<li>\n<p>WHM 가 변경된 모듈을 브라우저에 제공</p>\n</li>\n</ol>\n<p>server.tsx</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> webpack <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> webpackConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../webpack.client.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> webpackDevMiddleware <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-dev-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> webpackHotMiddleware <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-hot-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> compiler <span class=\"token operator\">=</span> <span class=\"token function\">webpack</span><span class=\"token punctuation\">(</span>webpackConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n  <span class=\"token comment\">//메모리상에 번들 파일을 저장하고 Express.js 서버와 통합하여 실시간으로 변화를 반영</span>\n  <span class=\"token function\">webpackDevMiddleware</span><span class=\"token punctuation\">(</span>compiler<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">publicPath</span><span class=\"token operator\">:</span> webpackConfig<span class=\"token punctuation\">.</span>output<span class=\"token punctuation\">.</span>publicPath<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//핫 모듈 리플레이스먼트를 위한 미들웨어로, 변경된 모듈을 전체 페이지를 새로고침하지 않고도 실시간으로 업데이트</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">webpackHotMiddleware</span><span class=\"token punctuation\">(</span>compiler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그리고 현재 파일이 위치한 디렉토리를 정적파일을 제공하는 디렉토리로 설정한다</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>renderToString을 react-dom/server 에서 가져와 React 컴포넌트를 HTML 문자열로 렌더링한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> html <span class=\"token operator\">=</span> <span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>\n  <span class=\"token comment\">//서버사이드 렌더링에서 BrowserRouter 대신 사용하는 React-router</span>\n  <span class=\"token operator\">&lt;</span>StaticRouter location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>StaticRouter<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>csr에서는 BrowserRouter 라우터를 사용하는데 대신에 <br/>StaticRouter는 서버사이드의 경로를 처리하는데 사용된다.\nreq.url 을 prop으로 받아 해당 url에 맞는 라우트를 렌더링한다. <br/></p>\n<p>그리고 렌더링된 react 컴포넌트에서 수집된 메타 데이터를 가져온다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> helmet <span class=\"token operator\">=</span> Helmet<span class=\"token punctuation\">.</span><span class=\"token function\">renderStatic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 내가 렌더링할 html과 메타데이터의 준비가 끝났다면 보낼차례이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">res<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content-type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;!DOCTYPE html>\n      &lt;html lang=\"en\">\n        &lt;head>\n          &lt;meta name=\"viewport\" content=\"width=device-width, user-scalable=no\">\n          &lt;meta name=\"google\" content=\"notranslate\">\n     \n          </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>helmet<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        &lt;/head>\n        &lt;body>\n          &lt;div id=\"root\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>html<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div>\n          &lt;script type=\"text/javascript\" src=\"main.js\">&lt;/script>\n        &lt;/body>\n      &lt;/html>\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 작성한 server.tsx 를 번들링할 웹팩 파일을 작성한다.\nserver.tsx</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nodeExternals <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-node-externals'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'node'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// it enables '__dirname' in files. If is not, '__dirname' always return '/'.</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">server</span><span class=\"token operator\">:</span> <span class=\"token string\">'./src/server.tsx'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">chunkFilename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.tsx?$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ts-loader'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">extensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.jsx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.tsx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">externals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>express 코드를 컴파일 하므로 entry는 server.tsx</p>\n<p>webpack.server.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nodeExternals <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-node-externals'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'node'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// it enables '__dirname' in files. If is not, '__dirname' always return '/'.</span>\n\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">server</span><span class=\"token operator\">:</span> <span class=\"token string\">'./src/server.tsx'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">chunkFilename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.tsx?$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ts-loader'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">extensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.jsx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.tsx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">externals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>webpack은 entry 포인트 부터 앱을 시작하여 종속성을 따라가며 번들링한다.\nhotMiddlewareScript 을 추가 하며 webpack HMR 기능을 초기화하고 변경 사항을 감지하여 브라우저에 전달한다.</p>\n<p>webpack.client.js 는 이전 작성했던 webpack.dev.js 의 ssr 용이라 할 수 있다.\n개발할때 클라이언트사이드 코드가 변경될 때 변경사항을 감지하고 빠르게 번들링 해주어 브라우저에 전달한다.</p>\n<p>server.tsx 코드 중 일부 참고</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//개발 중에 코드 변경사항을 실시간으로 반영하여 개발 효율성을 높입</span>\n  <span class=\"token keyword\">const</span> webpack <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> webpackConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../webpack.client.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// !!</span>\n\n  <span class=\"token keyword\">const</span> webpackDevMiddleware <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-dev-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> webpackHotMiddleware <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-hot-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> compiler <span class=\"token operator\">=</span> <span class=\"token function\">webpack</span><span class=\"token punctuation\">(</span>webpackConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">//메모리상에 번들 파일을 저장하고 Express.js 서버와 통합하여 실시간으로 변화를 반영</span>\n    <span class=\"token function\">webpackDevMiddleware</span><span class=\"token punctuation\">(</span>compiler<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">publicPath</span><span class=\"token operator\">:</span> webpackConfig<span class=\"token punctuation\">.</span>output<span class=\"token punctuation\">.</span>publicPath<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//핫 모듈 리플레이스먼트를 위한 미들웨어로, 변경된 모듈을 전체 페이지를 새로고침하지 않고도 실시간으로 업데이트</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">webpackHotMiddleware</span><span class=\"token punctuation\">(</span>compiler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>자 그리고 준비는 끝 ! <br/>\n스크립트를 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn build:dev &amp;&amp; node ./dist/server.js\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//SSR</span>\n    <span class=\"token property\">\"start:wds\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --env=dev --profile --color\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//CSR</span>\n    <span class=\"token property\">\"build:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rm -rf dist/ &amp;&amp; NODE_ENV=development yarn build:client &amp;&amp; NODE_ENV=development yarn build:server\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build:server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --env=server --progress --profile --color\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build:client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --env=client --progress --profile --color\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<ul>\n<li>\n<p>start:wds : 처음에 작업했던 webpack.dev.js 를 구동시키고</p>\n</li>\n<li>\n<p>start : <br/>\nwebpack.server.js\nwebpack.client.js 를 구동시켜 <br/>각각 서버와 클라이언트의 파일을 번들링하고\ndist 폴더안으로 파일을 내보낸다.<br/><br/>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 249px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a3ed2dd148923b25df2e781d7bff987/6a5fb/dist.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7UlEQVQoz42STW/TQBCG8z8SrhFtEhPb++W113Y+2yaxTRInIY1I2kqtCuqBCwghLlzhAr+AY2/8xRft5hsO7eHRaGdmX81o3kI2GCLpZximI3S7PVxcJHidjkwuS4bQdf2e5m9MnIxnGGbjNelolwukQrFYRKHuUggVIWACj58+YzmZweUeVBhD1145xGDZ7lE8wqU4qVTxolRCwWUC1PMhuMDD5Qq98wwOFeBeAJty2IQZHMpNfg/foQeo1Ky1oEMoGGcoVyjmoxM8fi/D8wQ8qRAECr6vIGUALiTqLoHtUtgm7nEIw+l2QuI3wFUTFouRpg3cXcWgQQMsaBm4akOEHRMdL4Yrj3FkDOI3UakTlLRgN8lxluRQ3Qne3Q3w+0eE/nCGbLpEvrjGYLxANn2Ldn+MziBH+1/6Y5ylU5Coh5I+ylYwOp/g5jrBt49d9EdzzK/usbp9QL64weX1/U6s85TgduUajZFlEb5+CMyb+i0Q2QD1m9A9ei1HPmPl9VE4XlYpVhMbv75YEJ6AUjGUtlMQGhgXzzuKo20jPFgOR6fFcLsgcBlDfWcV/p9NDrEJh7beaXVrG+M5D+Uqx/uliz8/LQgpEUYtY24VNgzSDw/8eCjINoK1vSDh3q657m7MejCV/uBuPj8l+Be3tZvztc9tfwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DIST\"\n        title=\"DIST\"\n        src=\"/static/7a3ed2dd148923b25df2e781d7bff987/6a5fb/dist.png\"\n        srcset=\"/static/7a3ed2dd148923b25df2e781d7bff987/c26ae/dist.png 158w,\n/static/7a3ed2dd148923b25df2e781d7bff987/6a5fb/dist.png 249w\"\n        sizes=\"(max-width: 249px) 100vw, 249px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br/><br/>\n<code class=\"language-text\">main.js</code> : webpack.client.js 번들파일 <br/></p>\n</li>\n</ul>\n<p>따로 main 이란 이름을 지정하진 않았지만 이 배열에서 단일 엔트리 포인트로 취급하여 기본적으로 main 이라는 이름을 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>hotMiddlewareScript<span class=\"token punctuation\">,</span> <span class=\"token string\">\"./src/index.tsx\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n <br/>\n<p><code class=\"language-text\">server.js</code> : webpack.server.js 번들파일</p>\n<h3>4. 실행결과</h3>\n<h5>CSR</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8421b953e2c2d0fc37fed30e7d70a30e/7a1fb/CSR.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.92405063291139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACK0lEQVQ4y42S607bQBCF8yQkJLb3frG98cZJHEggQKGiVLz/s3yVzUVVVar+OJrVSvPtmTM7K21E+JbSBtbHZ7rbV0RI6HqD7U80/cC63xHyHtsdcCESQ8CPNUacjwQfqFyDSgOzlTRUNrCoFDok6sMzYXPD/u6Vbb/nPkdOraWONbvx7uqO0ybx1Nc8bGoecs0pea67xGE3MCuURdjIpdDouiMdf6JiRtuAVBpvDc4YLivNUnmWOlJISyX1p1ZCIaSiqMS7Q+NZSjtB0+Ebw/mF223H/abmtI5sG0/tLFoprFaUQk2PjDCtzSRj3jQrtEO60aFBuIiOCRkzlWtpnEEpTVFJNsFSW0PjLEobWu8w73UdHI23RGeZjTDp6ylD23T4/g6b9nSHM31qOeWWJkZUOhB294TUs/aa1htysDRWU7nIQmguCsFM+fozQ9v2xP0T+fidm8cXtsOR8/mO68OBdX9FHu6J3Q5hIto3WF+jfGKcclkpLiv15nDc8lIahF9T+YwMHabdUrqE9C05GIJRBGex7QZR7zHtDpe22HxDaTyLQrwBJ4cushQal4/YNLCsJKtKTltbCc1cWObVOJJkvqqYF+VUL8bzqmBRygk21gko3ZihJOQr6uEJ3w2kpiFHR0wZn49vsbw3/k0f0Ak4fhsdGrrjD5rhkUIZ5oVgUSrmv72++AfwQ+9LCZTaU7p2GvEjj8vfYH86+RI4ZjdqcjS5kl82/o/DX6yMjJ+LKSuqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CSR\"\n        title=\"CSR\"\n        src=\"/static/8421b953e2c2d0fc37fed30e7d70a30e/f058b/CSR.png\"\n        srcset=\"/static/8421b953e2c2d0fc37fed30e7d70a30e/c26ae/CSR.png 158w,\n/static/8421b953e2c2d0fc37fed30e7d70a30e/6bdcf/CSR.png 315w,\n/static/8421b953e2c2d0fc37fed30e7d70a30e/f058b/CSR.png 630w,\n/static/8421b953e2c2d0fc37fed30e7d70a30e/40601/CSR.png 945w,\n/static/8421b953e2c2d0fc37fed30e7d70a30e/7a1fb/CSR.png 1030w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h5>SSR</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f2b472c4538d630429ea750a36fed823/6be49/SSR.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaklEQVQ4y62RS4/URhSFrYgoKyQUEBIoEupp18suvx/lR9tud9OARmGYBXvWCCRAQ1ZZ5Kd/kT09gmwJi0/31K3S1alzvfvTO3579YVHVzc8evOVe6ePa33w5xd+ffGZx2//4ffrv7l3+sTDNzc8vLrhl+MHHl//xf3Lz3jTe7z5Pd7+zLba86yc8d0R4Y78kY1cVAcuqplN/ZxwvCIcXrOpT2tvWx94mo5c1Ac21cyTZFjPT9NhxdNaEweKKNDkaUJTFaShRostRmyR/gblb1a99JTYEkh/1fqsv8fzdUAcR0SZozu8pu12tKnFhCG+VGhtUEohlUJpg1T6Pyitkfqb9oQyWBsSJzluvCSreprdgX0Z87JOaFJL3U40uyN9VXCqYo5VzFzGdJllzC1lFKwmFjyxOIwirI3I3UThBtrdzFxYTqUlTxKqbo9rB/o8YspCptwyFjE2CAiNJjB6rQuerzRRZAmtXd3FWU1RtaRVR1J2FG5HWXfUkaHJYvphJCsdUdFjo3iNY/nqilJ4UgekaUxaNPTH69tHJsAEFm0M2gS3KEmgFTZc7gKkNgghEb6PFGfuBmZZSpKVVP1zirpnVxVMZUrT9DSupe0PONdTVg11t6cvEuZdy7y/jaJwI3U30WbRncOEJM1ppksKN9G0I0PjGMuUscrYu3LVdZ5TNwNTmTCWCUNTUzU78mYmLx2hOTvMs5Q4c9T9Ea0EQgj8FYmQku13WgifrZDreXkj1u9ukUJ8yzBJYsyS0znYpf4o3rKAdVNn9N3GfpB1oF4G/SQ8YcLzdPNT8LpxJkpSxNIwIdIE/4t/Aex47HRbAmljAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SSR\"\n        title=\"SSR\"\n        src=\"/static/f2b472c4538d630429ea750a36fed823/f058b/SSR.png\"\n        srcset=\"/static/f2b472c4538d630429ea750a36fed823/c26ae/SSR.png 158w,\n/static/f2b472c4538d630429ea750a36fed823/6bdcf/SSR.png 315w,\n/static/f2b472c4538d630429ea750a36fed823/f058b/SSR.png 630w,\n/static/f2b472c4538d630429ea750a36fed823/40601/SSR.png 945w,\n/static/f2b472c4538d630429ea750a36fed823/6be49/SSR.png 1160w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<br/></p>\n<p>초기 로드시 CSR 에서는 빈껍데기인 div 태그만 보이고\nSSR 에서는 헤더가 잘 노출된다.<br/>\nSSR 의 대표적인 장점을 여기서 확인할 수 있다.\n이제 기본적인 구성을 마쳤다.<br/>\n이 프로젝트로 다양한것들을 확장해볼 수 있겠다.</p>","frontmatter":{"title":"Isomorphic","date":"September 25, 2023","description":"서버와 더 가까워지기"}},"previous":{"fields":{"slug":"/about-docker/"},"frontmatter":{"title":"도커 명령어 정리"}},"next":{"fields":{"slug":"/about-monorepo/"},"frontmatter":{"title":"모노레포의 효율성 (pnpm + turbo)"}}},"pageContext":{"id":"9d87104d-4363-55fd-b7ec-e477aeb8a378","previousPostId":"57259651-edfe-5dc8-90eb-c4dc6fd3cf7b","nextPostId":"af02d02e-8d50-5c07-b6f3-43b1c43cfb19"}},"staticQueryHashes":["2841359383","3257411868"]}