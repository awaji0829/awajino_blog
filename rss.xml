<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[잘 안다는 기준은 우리 엄마한테 설명할 수 있어야 한다.]]></description><link>https://awaji0829.gatsbyjs.io</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 31 Jul 2024 13:35:21 GMT</lastBuildDate><item><title><![CDATA[매일 아침 신규상장건 E2E 테스트 하기 with slack api]]></title><description><![CDATA[Cypress 사용자 입장에서 서비스를 테스트 하고 싶을때 뿐만 아니라 가장 적합한 테스트 도구이다. 
우리 회사는 QA 인원이 한정적이기 때문에 반복적인 QA 작업은 점진적으로 Cypress 를 도입하고 있다. CI/CD…]]></description><link>https://awaji0829.gatsbyjs.io/about-cypress/</link><guid isPermaLink="false">https://awaji0829.gatsbyjs.io/about-cypress/</guid><pubDate>Thu, 06 Jun 2024 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e0a07256bb75e4ed2ce36c0cb04c33d9/94774/image.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVQoz11STW8TMRDNfyLNHyg/pJwr/kK5AjfgUqS2ogf6Byq4tqGkHDhQrimQ9NBsRdTsesb2fHi7RvZmk1DryfK80bM0b16vMgatM4ArACKgBexK2HwseUBrnesBoISaRT2xI3aeWFQ0sARWZXmMtkWsLKFnAFiUWJqmifloqJ0nT+KIff6uhc+lJyYWYmHRXlkZloDWjUbfvo4uh18ubmcz0eCJagnMqqEmUcl3KyPqxJUxD038M70ZDAY7O8/6T7Y+HB/HGI2la4TSQlEUBqC4uwNA58k650k8i2gnvv71e2/vxenppzdv3308OYkxzgtzMfz8/efZq5evj44O99/vX139GI/Hk8mEOImZkxiaGKfTm35/a3f3+fb204ODwxgjgn1Y3FvE+0X5dz4vywqsXZSVdW49swFQrdH50WWa+ex8eDsrREJyXpeurhwmVp/QiQHwkduiIfssrbft/lZWp9ZajFmc97wEC2Xm/912pa7JNLN1HtC2GUrZ2kjbJrlEThimhPl/3GteDtl/Xm4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;alt text&quot;
        src=&quot;/static/e0a07256bb75e4ed2ce36c0cb04c33d9/f058b/image.png&quot;
        srcset=&quot;/static/e0a07256bb75e4ed2ce36c0cb04c33d9/c26ae/image.png 158w,
/static/e0a07256bb75e4ed2ce36c0cb04c33d9/6bdcf/image.png 315w,
/static/e0a07256bb75e4ed2ce36c0cb04c33d9/f058b/image.png 630w,
/static/e0a07256bb75e4ed2ce36c0cb04c33d9/40601/image.png 945w,
/static/e0a07256bb75e4ed2ce36c0cb04c33d9/78612/image.png 1260w,
/static/e0a07256bb75e4ed2ce36c0cb04c33d9/94774/image.png 3074w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h5&gt;Cypress&lt;/h5&gt;
&lt;p&gt;사용자 입장에서 서비스를 테스트 하고 싶을때 뿐만 아니라 가장 적합한 테스트 도구이다. &lt;br/&gt;
우리 회사는 QA 인원이 한정적이기 때문에 &lt;br/&gt;반복적인 QA 작업은 점진적으로 Cypress 를 도입하고 있다.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;CI/CD 에 테스트를 넣어서도 진행할 수 있지만&lt;br/&gt;
AI 챗봇 서비스에서 일부 신규상장건 및 사명변경이 된 종목들은 화면에서 종목명과&lt;br/&gt;
답변의 종목명이 다르게 보이는 이슈가 있었다.&lt;/p&gt;
&lt;p&gt;이는 백엔드 측에서 매일 아침 서비스에 들어가 일일히 신규상장건을 확인한다는 제보를 받았다.&lt;br/&gt;
물론 국내쪽만 확인하는 터라 그렇게 많지는 않은 갯수였지만&lt;br/&gt; 이 또한 여러모로 리소스가 드는 일이다.&lt;br/&gt;&lt;/p&gt;
&lt;h4&gt;구현하고 싶은 사항&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;그날 이슈가 있는 종목을 리스트로 받아 매일 아침 8시 40분에 &lt;br/&gt;종목별로 사명이 맞게 들어가는지 테스트를 한다.&lt;/li&gt;
&lt;li&gt;해당 종목의 테스트 결과를 SLCAK 채널로 전송한다.&lt;/li&gt;
&lt;li&gt;단순히 테스트 실패 여부를 보내기 보다는 어떤 종목에서 이슈가 생겼는지 실패한 스크린샷을 보낸다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;테스트 코드 작성하기&lt;/h4&gt;
&lt;p&gt;우선 구현하고자 하는 테스트 코드를 작성한다.&lt;br/&gt;
신규상장건들은 굳이 DB를 치지 않아도 될 일이라&lt;br/&gt;
매일 데이터팀에서 S3로 올려준 파일을 활용하여 받기로 하였다.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;ex) spec.cy.ts (샘플코드)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;template spec&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;AI CHAT E2E TEST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    신규상장건들&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;종목&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;?symbol=&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;종목&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;symbol&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;amp;cmp_nm=&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;종목&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;7000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;종목&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;be.visible&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;테스트 결과와 실패스크린샷 슬랙에 전송하기&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;cypress test 하기&lt;/li&gt;
&lt;li&gt;결과 여부 테스트 slack 채널에 전송하기&lt;/li&gt;
&lt;li&gt;실패하면 어느 부분에서 실패했는지 스크린샷도 같이 보내기&lt;/li&gt;
&lt;li&gt;이 모든 동작은 셸스크립트 파일로 자동화한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;#!/bin/bash

#테스트 환경세팅, 실행
echo &amp;quot;E2E 테스트 시작&amp;quot;

export NVM_DIR=&amp;quot;$HOME/.nvm&amp;quot;
[ -s &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ] &amp;amp;&amp;amp; \. &amp;quot;$NVM_DIR/nvm.sh&amp;quot;

nvm use 20.5.1

export PATH=$NVM_DIR/versions/node/v20.5.1/bin:$PATH

cd /Users/alpahbridge/code/alpha/tangopick_provider

yarn cypress:run &amp;gt; cypress.log 2&amp;gt;&amp;amp;1

# Cypress 로그 읽기 =&amp;gt; 테스트 결과로 로그를 떨어트려 준다.
LOG_CONTENT=$(awk &amp;#39;/\(Run Finished\)/,0&amp;#39; cypress.log | jq -R -s &amp;#39;.&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트 환경을 세팅해주고 테스트실행, &lt;br/&gt;결과를 읽어 LOG_CONTENT라는 변수에 할당한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;
complete_upload_external() {
  local file_path=&amp;quot;$1&amp;quot;
  local file_name=$(basename &amp;quot;$file_path&amp;quot;)
  local file_size=$(stat -f%z &amp;quot;$file_path&amp;quot;)

  # 업로드 URL 요청🔥
  local getupload_payload=&amp;quot;filename=$(urlencode &amp;quot;$file_name&amp;quot;)&amp;amp;length=$file_size&amp;amp;channels=$(urlencode &amp;quot;$SLACK_CHANNEL_ID&amp;quot;)&amp;quot;

  local start_response=$(curl -s -X POST \
    -H &amp;quot;Authorization: Bearer $SLACK_TOKEN&amp;quot; \
    -H &amp;quot;Content-Type: application/x-www-form-urlencoded&amp;quot; \
    --data &amp;quot;$getupload_payload&amp;quot; \
    https://slack.com/api/files.getUploadURLExternal)

  local upload_url=$(echo &amp;quot;$start_response&amp;quot; | jq -r &amp;#39;.upload_url&amp;#39;)
  local file_id=$(echo &amp;quot;$start_response&amp;quot; | jq -r &amp;#39;.file_id&amp;#39;)

  if [ &amp;quot;$upload_url&amp;quot; = &amp;quot;null&amp;quot; ] || [ &amp;quot;$file_id&amp;quot; = &amp;quot;null&amp;quot; ]; then

    echo &amp;quot;업로드 url 얻기 실패: $start_response&amp;quot;
    return
  fi

  # 파일 업로드
  local upload_response=$(curl -s -F file=@&amp;quot;$file_path&amp;quot; &amp;quot;$upload_url&amp;quot;)
  echo &amp;quot;파일 업로드 응답값: $upload_response&amp;quot;

  # 업로드 완료 요청🔥
  local complete_payload=$(jq -n --arg file_id &amp;quot;$file_id&amp;quot; &amp;#39;{
    file_id: $file_id,
    files: [{ id: $file_id }]
  }&amp;#39;)
  echo &amp;quot;$complete_payload&amp;quot; &amp;gt; /tmp/complete_payload.json

  local complete_response=$(curl -s -X POST \
    -H &amp;quot;Authorization: Bearer $SLACK_TOKEN&amp;quot; \
    -H &amp;quot;Content-Type: application/json&amp;quot; \
    -d @/tmp/complete_payload.json \
    https://slack.com/api/files.completeUploadExternal)

  echo &amp;quot;파일 업로드 요청 응답값: $complete_response&amp;quot;

  # 파일 공유 요청🔥
 local share_payload=&amp;quot;file=$(urlencode &amp;quot;$file_id&amp;quot;)&amp;amp;channels=$(urlencode &amp;quot;$SLACK_CHANNEL_ID&amp;quot;)&amp;quot;

  echo &amp;quot;$share_payload&amp;quot; &amp;gt; /tmp/share_payload.json

  local share_response=$(curl -s -X POST \
    -H &amp;quot;Authorization: Bearer $SLACK_TOKEN&amp;quot; \
    -H &amp;quot;Content-Type: application/x-www-form-urlencoded&amp;quot; \
    -d @/tmp/share_payload.json \
    https://slack.com/api/files.remote.share)

  echo &amp;quot;공유 응답값: $share_response&amp;quot;

}

# URL 인코딩 함수
urlencode() {
  local string=&amp;quot;$1&amp;quot;
  local encoded=&amp;quot;&amp;quot;
  for (( i=0; i&amp;lt;${#string}; i++ )); do
    local char=&amp;quot;${string:$i:1}&amp;quot;
    case &amp;quot;$char&amp;quot; in
      [a-zA-Z0-9.~_-]) encoded+=&amp;quot;$char&amp;quot; ;;
      *) encoded+=$(printf &amp;#39;%%%02X&amp;#39; &amp;quot;&amp;#39;$char&amp;quot;) ;;
    esac
  done
  echo &amp;quot;$encoded&amp;quot;
}


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트 결과를 읽고 슬랙으로 보내는것은 간단하나&lt;br/&gt;
어떤 종목이 실패해서 어떻게 보이는 상태인지 한번에 알려면 &lt;br/&gt;실패 스크린샷도 보내는게 맞는것 같았다. (그게 자동화의 이유자나)&lt;br/&gt;&lt;br/&gt;
이를 위해 내가 이용한 slack api 는 3개다. (ㅠㅠ 한번에 보내는것도 만들어 줄 순 없었니)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;files.getUploadURLExternal&lt;/code&gt; : 임시 파일 upload url 을 얻는다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;files.completeUploadExternal&lt;/code&gt; : 파일 업로드 시킴&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;files.remote.share&lt;/code&gt; : 슬랙방에 파일(스샷)공유&lt;br/&gt;&lt;br/&gt;
upload 라는 메소드를 이용하려 했지만 &lt;br/&gt;해당 메소드는 25년부터 지원하지 않는다 하여&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getUploadURLExternal&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;completeUploadExternal&lt;/code&gt; 두개의 메소드를 사용하였다.
슬랙방에 사진이 뜨기를 몇십번의 테스트를 진행하였고.&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
드디어 !&lt;br/&gt;&lt;br/&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b7f343e7bd99af04bab24ef742408a3c/0d292/screenshot2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVQ4y5WTzWoTURiGcwHZSW2mM5nMnDl/MzWCrRb/qlKVCLEBA26CKHgDxYVduCleQKuhNmqRrrwJKYIiVqHooog7t7oqFDciIo/MtKkTNSEeeM83A/M+8/2cU7DWYoyhN+4+D6u8t5Bu/4L+j/Kewp+wJInR1qK1RimN0hptzN/Su7FvhqmklNSvzTFZreKUHOLkEDap4geSsi8oVyL8IKJcEbjlIIsDgZFUzN2a58psg2NTxzl5+gxSJ5TGfA6WPEZGXQ6MjOG4FQJhCCM9GJiWceFijcmpabSdQMjD3J6/w0rnEZ2Hq7SXV1hcus/1GzezbJVJsgFaa/ZiTw/Tnlg8P6LsS4JAUip5bLx5z+cv27RaLRYW7pKuJ2tPs2y1He8HtPvAtMRQKKSM8DyXZ+uv2Hi7RbFY5Oy5GbZ3fnCv/ZhRxxsOGKmYMNwDui7rz1+z+e4jrutSv9xg5+tP2surwwOFiqkEOoM6jseLl5tsffiEEIJm8yrfvsODzlo2pAHA35OKlEFIg4gMQaiZOV+jdqlOHI9zZOIos40mJ05NEwqJ0n3Podn/U16xtYRhQBBUMoNSCt/3iSJB19fr7Sm5e39tToY4jjN1j1aSJNl7/tt8yb8Arm6jHMgfOvEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;screenshot&quot;
        title=&quot;screenshot&quot;
        src=&quot;/static/b7f343e7bd99af04bab24ef742408a3c/f058b/screenshot2.png&quot;
        srcset=&quot;/static/b7f343e7bd99af04bab24ef742408a3c/c26ae/screenshot2.png 158w,
/static/b7f343e7bd99af04bab24ef742408a3c/6bdcf/screenshot2.png 315w,
/static/b7f343e7bd99af04bab24ef742408a3c/f058b/screenshot2.png 630w,
/static/b7f343e7bd99af04bab24ef742408a3c/40601/screenshot2.png 945w,
/static/b7f343e7bd99af04bab24ef742408a3c/78612/screenshot2.png 1260w,
/static/b7f343e7bd99af04bab24ef742408a3c/0d292/screenshot2.png 1620w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h4&gt;매일 아침마다 실행하도록 자동화하기&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Crontab&lt;/code&gt; : 크론탭(Crontab)은 Unix 계열 운영 체제에서 사용되는 시간 기반 잡 스케줄러이다. &lt;br/&gt;&lt;br/&gt;
크론탭을 사용 할 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;crontab -e
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;시간 설정해주고 실행할 파일 기재해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;40 8 * * * /path/to/your/script.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;작성한 쉘 스크립트는 오전 8시 40분 해당 테스트를 실행시켜 줄 것이다.&lt;/p&gt;
&lt;p&gt;매일 이슈가 있는 종목들이 한개 이상씩은 나온다.&lt;br/&gt;
이러한 세팅이 앞으로 여러모로 쓸모가 있을것 같아 기분이 좋다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[모노레포의 효율성 (pnpm + turbo)]]></title><description><![CDATA[…]]></description><link>https://awaji0829.gatsbyjs.io/about-monorepo/</link><guid isPermaLink="false">https://awaji0829.gatsbyjs.io/about-monorepo/</guid><pubDate>Sat, 06 Apr 2024 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;나는 현재 마이크로레포로 회사에서 프로젝트를 관리하고 있다.&lt;br/&gt;
프론트 개발자가 적고 프로젝트의 갯수는 많다.&lt;br/&gt;
그 중에서도 같은 모듈로 여러 프로젝트에 쓰이는 경우가 많고&lt;br/&gt;
해당 모듈이 업데이트 될때마다 각 프로젝트에 수정을 넣어줘야 하기에&lt;br/&gt;
모노레포라는 것에 관심을 두게 되었다.&lt;/p&gt;
&lt;p&gt;일단 모노레포를 직접 구성해보면서 이해해보기로 했다.&lt;/p&gt;
&lt;h3&gt;모노레포는 어떻게 프로젝트들을 관리하는가?&lt;/h3&gt;
&lt;h5&gt;apps&lt;br/&gt;&lt;/h5&gt;
&lt;p&gt;┣ app1&lt;br/&gt;
┗ app2&lt;/p&gt;
&lt;h5&gt;packages&lt;br/&gt;&lt;/h5&gt;
&lt;p&gt;┗ ui&lt;br/&gt;
┗ ts-config&lt;br/&gt;
┗ eslint-config&lt;br/&gt;&lt;/p&gt;
&lt;br/&gt;
apps 는 나의 프로젝트들이 들어있는 폴더이고 &lt;br/&gt;packages는 내가 저 apps 안의 프로젝트들에서&lt;br/&gt; 사용할 수 있는
package 들을 모아둔 폴더이다.&lt;br/&gt;&lt;br/&gt;
나는 npm 혹은 yarn 을 이용해 패키지를 설치해 사용하는 것처럼&lt;br/&gt;
저 packages 안에 공통모듈 혹은 공통설정들을 두고 사용할 수 있는 것이다.&lt;br/&gt;
&lt;br/&gt;&lt;br/&gt;
이런식으로 해당 패키지의 이름을 설정해주고 &lt;br/&gt;
packages/ui/package.json &lt;br/&gt;&lt;br/&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&quot;name&quot;: &quot;@repo/ui&quot;,
&quot;version&quot;: &quot;1.0.0&quot;,
&quot;description&quot;: &quot;&quot;,
&quot;main&quot;: &quot;index.js&quot;,&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;프로젝트 안에서 디펜던시 안에 해당 패키지를 추가해준다. &lt;br/&gt;
apps/app1/package.json&lt;br/&gt;
&lt;br/&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&quot;devDependencies&quot;: {
   &quot;@repo/ui&quot;: &quot;workspace:*&quot;,
   &quot;@repo/eslint&quot;: &quot;workspace:*&quot;,
   &quot;typescript&quot;: &quot;^5&quot;,
   &quot;@types/node&quot;: &quot;^20&quot;,
   &quot;@types/react&quot;: &quot;^18&quot;,
   &quot;@types/react-dom&quot;: &quot;^18&quot;,
   &quot;eslint&quot;: &quot;^8&quot;,
   &quot;eslint-config-next&quot;: &quot;14.2.4&quot;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 내가 공통적으로 가져가고 싶은 것 들을 (eslint, config, style, ui .. 등)&lt;br/&gt;
레포안의 패키지로 만들어 공유하는 시스템이다. &lt;br/&gt; &lt;br/&gt;
각각의 패키지 폴더안은 pnpm init 을 하여
package.json 을 생성해주었다.
&lt;br/&gt; 이는 각각의 패키지가 독립적으로 버전관리가 가능하다.&lt;br/&gt;
다만 유의해야 할 점은 공통의 패키지이기 때문에 수정점이 해당 패키지를 사용하는 모든 프로젝트에 미칠 영향을 고려해야 된다는 것이다.&lt;br/&gt;&lt;br/&gt;
이는 때로 장점이 될 수도 단점이 될 수도 있기 때문에.&lt;br/&gt;프로젝트의 리스크를 잘 고려해가며 작업해야겠다.&lt;/p&gt;
&lt;h3&gt;turbo를 선택한 이유?&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Salted_duck_egg&quot;&gt;salted duck eggs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./salty_egg.jpg&quot; alt=&quot;Chinese Salty Egg&quot;&gt;&lt;/p&gt;
&lt;h6&gt;&lt;/h6&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt; - good) setState(&apos;gimbab&apos;)
 - nono) this.state = &apos;gimbab&apos; or state = &apos;gimbab&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pnpm init&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Red
&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Green
&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Blue

&lt;span class=&quot;token list punctuation&quot;&gt;*&lt;/span&gt; Red
&lt;span class=&quot;token list punctuation&quot;&gt;*&lt;/span&gt; Green
&lt;span class=&quot;token list punctuation&quot;&gt;*&lt;/span&gt; Blue

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Red
&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Green
&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; Blue&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;code goes&lt;/code&gt; here in this line&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bold&lt;/strong&gt; goes here&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;-&lt;span class=&quot;token code-snippet code keyword&quot;&gt;`pnpm init`&lt;/span&gt; here in this line

&lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token bold&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token content&quot;&gt;bold&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;**&lt;/span&gt;&lt;/span&gt; goes here&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pnpm init&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://velog.io/@jma1020/turborepo-pnpm-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EC%82%AC%EC%9A%A9%EA%B8%B0-%EC%84%A4%EC%A0%95&quot;&gt;https://velog.io/@jma1020/turborepo-pnpm-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EC%82%AC%EC%9A%A9%EA%B8%B0-%EC%84%A4%EC%A0%95&lt;/a&gt;
이런 모노레포를 형성시킬 수 있는 패키지 중 대표적으로 turborepo 존재합니다.
해당 turborepo 사이트에서도 설명해주지만, 큰 특징 9개를 나열해보겠습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Incremental builds
작업 진행을 캐싱해 이미 계산된 내용은 건너 뛰는 것을 의미합니다. 빌드는 딱 한 번만 하는 것을 목표로 합니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Content-aware hasing
타임스탬프가 아닌 콘텐츠를 인식하는 방식으로 해싱을 지원합니다. 이를 통해 모든 파일을 다시 빌드하는 것이 아니라 변경된 파일만 빌드합니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cloud caching
클라우드 빌드 캐시를 팀원 및 CI/CD와 공유합니다. 이를 통해 로컬 환경을 넘어 클라우드 환경에서도 빠른 빌드를 제공합니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Parallel execution
모든 코어를 사용하는 병렬 실행을 목표로 합니다. 지정된 태스크 단위로 의존성을 판단해 최대한 병렬적으로 작업을 진행합니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Task Pipelines
태스크 간의 연결을 정의해서 빌드를 언제 어떻게 실행할지 판단해 최적화합니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Zero Runtime Overhead
런타임 코드와 소스 맵을 다루지 않기 때문에 런타임 단계에서 파악하지 못한 리스크가 불거질 위험이 없습니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Pruned subsets
빌드에 필요한 요소만으로 모노 레포의 하위 집합을 생성해 PaaS 배포 속도를 높입니다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JSON configuration
별도의 코드 작업 없이 JSON 설정으로 터보를 사용할 수 있습니다.
// turbo.json { “baseBranch”: “origin/main”, “pipeline”: { “build”: { … } } }&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Profile in browser
빌드 프로필로 빌드 과정을 시각화하면 병목 지점을 쉽게 찾을 수 있습니다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;pnpm init&lt;/li&gt;
&lt;li&gt;apps 폴더와 packages 폴더 만들기&lt;/li&gt;
&lt;li&gt;yaml 파일&lt;/li&gt;
&lt;li&gt;turbo 설치&lt;/li&gt;
&lt;li&gt;apps/ my-app&lt;/li&gt;
&lt;li&gt;pnpm init &amp;#x26;pnpx create-next-app@latest 설치&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;루트 디펜던시 pnpm install [dependency name] -w (root에 실수로 dependecy를 추가하는 것을 방지하기 위해서)&lt;/p&gt;
&lt;p&gt;완료된거&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;pnpm 설치&lt;/li&gt;
&lt;li&gt;폴더구조 구성&lt;/li&gt;
&lt;li&gt;pnpm yaml 파일 생성&lt;/li&gt;
&lt;li&gt;next 플젝 추가&lt;/li&gt;
&lt;li&gt;터보설치&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;해야될거&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;eslint 설치 굿 !!!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;lock.yaml 파일이 그런 지도같은 역할?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;index.js 에서 각종 설정을 한 후에&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;packagejson 에 필요한 패키지들을 추가한 후에
name을 경로로 쓰일 이름으로 지정 그 이름을 가지고 이제
apps 에서 패키지로 쓸 수 있다
해당 프로젝트에 devdependcies 에 “@repo/eslint”: “workspace:*”,
요렇게 추가를 해주고 pnpm install 하면 노드모듈에 들어온다&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://velog.io/@yoosion030/PNPM%EC%9C%BC%EB%A1%9C-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0&quot;&gt;https://velog.io/@yoosion030/PNPM%EC%9C%BC%EB%A1%9C-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;tsconfig 설정&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ui 공유해보기
UI ESLINT 설정, 터보gen 설정&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;터보 제네레이터 설치?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;프리티어 설정&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Isomorphic]]></title><description><![CDATA[뭐든지 시작할때는 바닥부터 올라가야 이해할 수 있다고 느끼는 요즘이다. 1. react + typescript + babel 우선 간단한 리액트 앱을 만든다.  타입스크립트도 이왕에 챙겨준다.  app.tsx 와 index.tsx…]]></description><link>https://awaji0829.gatsbyjs.io/about-ssr/</link><guid isPermaLink="false">https://awaji0829.gatsbyjs.io/about-ssr/</guid><pubDate>Mon, 25 Sep 2023 22:12:03 GMT</pubDate><content:encoded>&lt;!-- CSR에 열광하던 시기를 지나 다시 SSR을 위해 다양한 프레임워크에서 변화가 일어나고 있다.
새로운 기술이 나오면 화두에 오르다 그 기술의 단점이 점점 부각될때 그를 보완하는 또 다른 신기술이 나오는 형태로
프론트엔드는 끊임없이 발전하고 있다. 여기에 더불어 GPT 와 함께라면 머리 아프게 로직을 고민하지 않아도 최소한 레퍼런스 형태 그 이상으로 코드를 작성해준다.

이렇게 되면 개발자는 필요 없어지겠다 생각했지만, 아직은 좀 더 두고봐야 할 일이다.
내가 마주하고 있는 대부분의 것들은 인간의 머릿속에서 나오고 있다. AI 가 모든걸 대체할 수 있겠지만 그 대체한 것에 어떤 문제점이 도사리고 있을지는 모를일이기 때문이다.

앞으로 대체될 수 있는 개발자는 무수히 많을것이고 나도 그 중 한명이 될 수도 있다.
누가 대체할 수 없을까 생각해보았다. 내 결론은 핵심을 알고 있는 사람이다.
그것이 비즈니스의 핵심이 될 수 있고 코드 로직의 핵심이 될 수 있다.

그리고 나는 핵심적인 것들을 파악하는 능력을 기르고자 한다. 앞으로 next.js 가 더욱 더 발전하든 previous.js 가 나오든
해당 프레임워크가 생겨난 이유와 동작원리를 알고 있다면 앞으로 나올 프레임워크도 예측가능한 상태로 만들 수 있다고 생각한다.

서론이 길었지만 사실 그냥 한번 궁금해서 해보고 싶었다.
react로 next.js 를 사용하지 않고 서버사이드 렌더링을 해보려고 한다. --&gt;
&lt;p&gt;뭐든지 시작할때는 바닥부터 올라가야 이해할 수 있다고 느끼는 요즘이다.&lt;/p&gt;
&lt;h3&gt;1. react + typescript + babel&lt;/h3&gt;
&lt;p&gt;우선 간단한 리액트 앱을 만든다. &lt;br/&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;yarn add react react-dom&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;타입스크립트도 이왕에 챙겨준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;yarn add typescript
yarn add --dev @types/react @types/react-dom tslint&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;yarn tsc --init&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;app.tsx 와 index.tsx 를 작성해준다.&lt;/p&gt;
&lt;p&gt;index.tsx&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ReactDOM &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-dom&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; App &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./App&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; rootElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;tsconfig&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;compilerOptions&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;plugins&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;typescript-tslint-plugin&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;target&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;esnext&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 타입스크립트가 컴파일러가 생성할 자바스크립트 코드 버전&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;jsx&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;preserve&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;allowSyntheticDefaultImports&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;esModuleInterop&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;strict&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;forceConsistentCasingInFileNames&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;module&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;esnext&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;moduleResolution&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;node&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;skipLibCheck&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 target 과 module 을 &lt;code class=&quot;language-text&quot;&gt;esnext&lt;/code&gt; 로 설정하고&lt;br/&gt;
moduleResolution 을 &lt;code class=&quot;language-text&quot;&gt;node&lt;/code&gt; 로 설정한다&lt;/p&gt;
&lt;p&gt;타입스크립트 파일은 컴파일 후에 자바스크립트로 변환되고 babel이 읽는다.&lt;/p&gt;
&lt;p&gt;babel은 기본적으로 es모듈 구문을 처리하도록 설계되어 있다.
저렇게 설정하지 않으면 타입스크립트가 CommonJS 혹은 다른 모듈 시스템으로 변환할 수 있기 때문에 바벨이 정상적으로 작동하지 않을 수 있다.&lt;/p&gt;
&lt;p&gt;물론 babel.config.json 에서도 @babel/preset-typescript 를 사용하여
타입스크립트를 처리하도록 설정해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;module.exports = &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  presets&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-env&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-typescript&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;2. webpack&lt;/h3&gt;
&lt;p&gt;webpack5로 깔아주었다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;yarn add --dev webpack webpack-cli webpack-dev-server html-webpack-plugin babel-loader ts-loader&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 webpack.cofing.js 와 webpack.dev.js 생성해준다.&lt;/p&gt;
&lt;p&gt;webapck.config.js 에 먼저 도달해 어떤 파일로 갈지 라우팅 역할을 한다. &lt;br/&gt;
client와 server 는 ssr 용
dev 는 csr 로 쓰일것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dev &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;./webpack.client&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dev&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;./webpack.dev&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;./webpack.server&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; HtmlWebpackPlugin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;html-webpack-plugin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./src/index.tsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;devServer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;historyApiFallback&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;directory&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;public&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//개발 서버가 제공할 정적파일 디렉토리&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\.tsx?$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;babel-loader&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ts-loader&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;//WDS 가 서브하는 파일은 js 이므로 모두 ts, js 모두 넣어준다&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.jsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.ts&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.tsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;webpack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HotModuleReplacementPlugin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 새로고침 없이 변경사항 반영&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HtmlWebpackPlugin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;index.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;public/index_dev.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// html 파일을 자동으로 생성하고 관리&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 위 처럼 설정한대로 public 폴더에 index_dev.html 파일을 작성해준다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DOCTYPE&lt;/span&gt; html&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;html lang&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;meta charset&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;format-detection&quot;&lt;/span&gt; content&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;telephone=no&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;meta name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;viewport&quot;&lt;/span&gt; content&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;width=device-width, user-scalable=no&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;meta
      name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;description&quot;&lt;/span&gt;
      content&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;React + Typescript + SSR + Code-splitting&quot;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;meta name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;google&quot;&lt;/span&gt; content&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;notranslate&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Hello World&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;title&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;head&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;root&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;body&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;html&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;++router &lt;br/&gt;
여기서 react-router 와 react-helmet 그리고 관련타입을 깔아주고 &lt;br/&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;yarn add react-router-dom react-helmet
yarn add --dev @types/react-router-dom @types/react-helmet&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;n개의 페이지를 만들고 각각 페이지마다 헬멧컴포넌트 안에 타이틀을 넣어주면 &lt;br/&gt;각 페이지마다 title 이 바뀌는 것을
볼 수 있다. csr과 ssr 에서 손쉽게 html 문서의 header 섹션을 관리해준다. &lt;br/&gt;
회사에서도 SEO 차원에서 비슷한 방식으로 사용하였고 봇이 각 페이지마다의 타이틀을 읽어 검색엔진에 우리 사이트를 효과적으로 노출해주었다.&lt;/p&gt;
&lt;h3&gt;3. SSR&lt;/h3&gt;
&lt;p&gt;이제 리액트 앱을 구성하였으니 서버사이드렌더링을 구현해본다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;yarn add express
yarn add --dev webpack-dev-middleware webpack-hot-middleware webpack-node-externals @types/express @types/webpack-dev-middleware @types/webpack-hot-middleware @types/webpack-env&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Webpack-dev-middleware(WDM)&lt;/code&gt; 은 웹팩의 번들링 결과물을 실시간으로 메모리에 저장하고 개발중인 애플리케이션에 제공하는 미들웨어다.
memory-fs 를 이용해 번들파일을 디스크가 아닌 메모리에 저장하기 때문에 빠른속도로 서빙할 수 있다&lt;/p&gt;
&lt;p&gt;(memory-fs : Node.js 환경에서 파일 시스템을 메모리에 저장하여 사용하는 가상 파일 시스템 라이브러리. 이는 실제 디스크에 파일을 기록하지 않고, 대신 메모리에 파일을 저장하고 읽는 방식으로 작동)&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;webpack-hot-middleware(WHM)&lt;/code&gt; 변경된 파일정보를 브라우저에 갱신시킨다&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;파일 변경&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;WDM 이 메모리에 파일 변경점을 메모리에 저장, 개발 서버에 빠르게 제공&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;WHM 가 변경된 모듈을 브라우저에 제공&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;server.tsx&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;../webpack.client.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackDevMiddleware &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack-dev-middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackHotMiddleware &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack-hot-middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; compiler &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webpackConfig&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//메모리상에 번들 파일을 저장하고 Express.js 서버와 통합하여 실시간으로 변화를 반영&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;webpackDevMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;compiler&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; webpackConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;output&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;publicPath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//핫 모듈 리플레이스먼트를 위한 미들웨어로, 변경된 모듈을 전체 페이지를 새로고침하지 않고도 실시간으로 업데이트&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;webpackHotMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;compiler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 현재 파일이 위치한 디렉토리를 정적파일을 제공하는 디렉토리로 설정한다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;express&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;renderToString을 react-dom/server 에서 가져와 React 컴포넌트를 HTML 문자열로 렌더링한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; html &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;renderToString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//서버사이드 렌더링에서 BrowserRouter 대신 사용하는 React-router&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;StaticRouter location&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;StaticRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;csr에서는 BrowserRouter 라우터를 사용하는데 대신에 &lt;br/&gt;StaticRouter는 서버사이드의 경로를 처리하는데 사용된다.
req.url 을 prop으로 받아 해당 url에 맞는 라우트를 렌더링한다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;그리고 렌더링된 react 컴포넌트에서 수집된 메타 데이터를 가져온다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; helmet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Helmet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;renderStatic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 내가 렌더링할 html과 메타데이터의 준비가 끝났다면 보낼차례이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;content-type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;text/html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
    &amp;lt;!DOCTYPE html&gt;
      &amp;lt;html lang=&quot;en&quot;&gt;
        &amp;lt;head&gt;
          &amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no&quot;&gt;
          &amp;lt;meta name=&quot;google&quot; content=&quot;notranslate&quot;&gt;
     
          &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;helmet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
        &amp;lt;/head&gt;
        &amp;lt;body&gt;
          &amp;lt;div id=&quot;root&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;html&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/div&gt;
          &amp;lt;script type=&quot;text/javascript&quot; src=&quot;main.js&quot;&gt;&amp;lt;/script&gt;
        &amp;lt;/body&gt;
      &amp;lt;/html&gt;
  &lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 작성한 server.tsx 를 번들링할 웹팩 파일을 작성한다.
server.tsx&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; nodeExternals &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack-node-externals&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NODE_ENV&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;node&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// it enables &apos;__dirname&apos; in files. If is not, &apos;__dirname&apos; always return &apos;/&apos;.&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./src/server.tsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;dist&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[name].js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;chunkFilename&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[name].js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\.tsx?$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;babel-loader&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ts-loader&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.jsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.ts&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.tsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;externals&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nodeExternals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;express 코드를 컴파일 하므로 entry는 server.tsx&lt;/p&gt;
&lt;p&gt;webpack.server.js&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; nodeExternals &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack-node-externals&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NODE_ENV&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;node&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// it enables &apos;__dirname&apos; in files. If is not, &apos;__dirname&apos; always return &apos;/&apos;.&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./src/server.tsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;dist&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[name].js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;chunkFilename&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[name].js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\.tsx?$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;babel-loader&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ts-loader&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.jsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.ts&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.tsx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token literal-property property&quot;&gt;externals&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nodeExternals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;webpack은 entry 포인트 부터 앱을 시작하여 종속성을 따라가며 번들링한다.
hotMiddlewareScript 을 추가 하며 webpack HMR 기능을 초기화하고 변경 사항을 감지하여 브라우저에 전달한다.&lt;/p&gt;
&lt;p&gt;webpack.client.js 는 이전 작성했던 webpack.dev.js 의 ssr 용이라 할 수 있다.
개발할때 클라이언트사이드 코드가 변경될 때 변경사항을 감지하고 빠르게 번들링 해주어 브라우저에 전달한다.&lt;/p&gt;
&lt;p&gt;server.tsx 코드 중 일부 참고&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NODE_ENV&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//개발 중에 코드 변경사항을 실시간으로 반영하여 개발 효율성을 높입&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;../webpack.client.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// !!&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackDevMiddleware &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack-dev-middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackHotMiddleware &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;webpack-hot-middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; compiler &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webpackConfig&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;//메모리상에 번들 파일을 저장하고 Express.js 서버와 통합하여 실시간으로 변화를 반영&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;webpackDevMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;compiler&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; webpackConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;output&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;publicPath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//핫 모듈 리플레이스먼트를 위한 미들웨어로, 변경된 모듈을 전체 페이지를 새로고침하지 않고도 실시간으로 업데이트&lt;/span&gt;
  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;webpackHotMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;compiler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;자 그리고 준비는 끝 ! &lt;br/&gt;
스크립트를 작성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn build:dev &amp;amp;&amp;amp; node ./dist/server.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//SSR&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;start:wds&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;webpack-dev-server --env=dev --profile --color&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//CSR&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build:dev&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;rm -rf dist/ &amp;amp;&amp;amp; NODE_ENV=development yarn build:client &amp;amp;&amp;amp; NODE_ENV=development yarn build:server&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build:server&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;webpack --env=server --progress --profile --color&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build:client&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;webpack --env=client --progress --profile --color&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;start:wds : 처음에 작업했던 webpack.dev.js 를 구동시키고&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;start : &lt;br/&gt;
webpack.server.js
webpack.client.js 를 구동시켜 &lt;br/&gt;각각 서버와 클라이언트의 파일을 번들링하고
dist 폴더안으로 파일을 내보낸다.&lt;br/&gt;&lt;br/&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 249px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7a3ed2dd148923b25df2e781d7bff987/6a5fb/dist.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7UlEQVQoz42STW/TQBCG8z8SrhFtEhPb++W113Y+2yaxTRInIY1I2kqtCuqBCwghLlzhAr+AY2/8xRft5hsO7eHRaGdmX81o3kI2GCLpZximI3S7PVxcJHidjkwuS4bQdf2e5m9MnIxnGGbjNelolwukQrFYRKHuUggVIWACj58+YzmZweUeVBhD1145xGDZ7lE8wqU4qVTxolRCwWUC1PMhuMDD5Qq98wwOFeBeAJty2IQZHMpNfg/foQeo1Ky1oEMoGGcoVyjmoxM8fi/D8wQ8qRAECr6vIGUALiTqLoHtUtgm7nEIw+l2QuI3wFUTFouRpg3cXcWgQQMsaBm4akOEHRMdL4Yrj3FkDOI3UakTlLRgN8lxluRQ3Qne3Q3w+0eE/nCGbLpEvrjGYLxANn2Ldn+MziBH+1/6Y5ylU5Coh5I+ylYwOp/g5jrBt49d9EdzzK/usbp9QL64weX1/U6s85TgduUajZFlEb5+CMyb+i0Q2QD1m9A9ei1HPmPl9VE4XlYpVhMbv75YEJ6AUjGUtlMQGhgXzzuKo20jPFgOR6fFcLsgcBlDfWcV/p9NDrEJh7beaXVrG+M5D+Uqx/uliz8/LQgpEUYtY24VNgzSDw/8eCjINoK1vSDh3q657m7MejCV/uBuPj8l+Be3tZvztc9tfwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;DIST&quot;
        title=&quot;DIST&quot;
        src=&quot;/static/7a3ed2dd148923b25df2e781d7bff987/6a5fb/dist.png&quot;
        srcset=&quot;/static/7a3ed2dd148923b25df2e781d7bff987/c26ae/dist.png 158w,
/static/7a3ed2dd148923b25df2e781d7bff987/6a5fb/dist.png 249w&quot;
        sizes=&quot;(max-width: 249px) 100vw, 249px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;br/&gt;&lt;br/&gt;
&lt;code class=&quot;language-text&quot;&gt;main.js&lt;/code&gt; : webpack.client.js 번들파일 &lt;br/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;따로 main 이란 이름을 지정하진 않았지만 이 배열에서 단일 엔트리 포인트로 취급하여 기본적으로 main 이라는 이름을 사용한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;hotMiddlewareScript&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./src/index.tsx&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;br/&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;server.js&lt;/code&gt; : webpack.server.js 번들파일&lt;/p&gt;
&lt;h3&gt;4. 실행결과&lt;/h3&gt;
&lt;h5&gt;CSR&lt;/h5&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8421b953e2c2d0fc37fed30e7d70a30e/7a1fb/CSR.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.92405063291139%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACK0lEQVQ4y42S607bQBCF8yQkJLb3frG98cZJHEggQKGiVLz/s3yVzUVVVar+OJrVSvPtmTM7K21E+JbSBtbHZ7rbV0RI6HqD7U80/cC63xHyHtsdcCESQ8CPNUacjwQfqFyDSgOzlTRUNrCoFDok6sMzYXPD/u6Vbb/nPkdOraWONbvx7uqO0ybx1Nc8bGoecs0pea67xGE3MCuURdjIpdDouiMdf6JiRtuAVBpvDc4YLivNUnmWOlJISyX1p1ZCIaSiqMS7Q+NZSjtB0+Ebw/mF223H/abmtI5sG0/tLFoprFaUQk2PjDCtzSRj3jQrtEO60aFBuIiOCRkzlWtpnEEpTVFJNsFSW0PjLEobWu8w73UdHI23RGeZjTDp6ylD23T4/g6b9nSHM31qOeWWJkZUOhB294TUs/aa1htysDRWU7nIQmguCsFM+fozQ9v2xP0T+fidm8cXtsOR8/mO68OBdX9FHu6J3Q5hIto3WF+jfGKcclkpLiv15nDc8lIahF9T+YwMHabdUrqE9C05GIJRBGex7QZR7zHtDpe22HxDaTyLQrwBJ4cushQal4/YNLCsJKtKTltbCc1cWObVOJJkvqqYF+VUL8bzqmBRygk21gko3ZihJOQr6uEJ3w2kpiFHR0wZn49vsbw3/k0f0Ak4fhsdGrrjD5rhkUIZ5oVgUSrmv72++AfwQ+9LCZTaU7p2GvEjj8vfYH86+RI4ZjdqcjS5kl82/o/DX6yMjJ+LKSuqAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;CSR&quot;
        title=&quot;CSR&quot;
        src=&quot;/static/8421b953e2c2d0fc37fed30e7d70a30e/f058b/CSR.png&quot;
        srcset=&quot;/static/8421b953e2c2d0fc37fed30e7d70a30e/c26ae/CSR.png 158w,
/static/8421b953e2c2d0fc37fed30e7d70a30e/6bdcf/CSR.png 315w,
/static/8421b953e2c2d0fc37fed30e7d70a30e/f058b/CSR.png 630w,
/static/8421b953e2c2d0fc37fed30e7d70a30e/40601/CSR.png 945w,
/static/8421b953e2c2d0fc37fed30e7d70a30e/7a1fb/CSR.png 1030w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h5&gt;SSR&lt;/h5&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f2b472c4538d630429ea750a36fed823/6be49/SSR.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaklEQVQ4y62RS4/URhSFrYgoKyQUEBIoEupp18suvx/lR9tud9OARmGYBXvWCCRAQ1ZZ5Kd/kT09gmwJi0/31K3S1alzvfvTO3579YVHVzc8evOVe6ePa33w5xd+ffGZx2//4ffrv7l3+sTDNzc8vLrhl+MHHl//xf3Lz3jTe7z5Pd7+zLba86yc8d0R4Y78kY1cVAcuqplN/ZxwvCIcXrOpT2tvWx94mo5c1Ac21cyTZFjPT9NhxdNaEweKKNDkaUJTFaShRostRmyR/gblb1a99JTYEkh/1fqsv8fzdUAcR0SZozu8pu12tKnFhCG+VGhtUEohlUJpg1T6Pyitkfqb9oQyWBsSJzluvCSreprdgX0Z87JOaFJL3U40uyN9VXCqYo5VzFzGdJllzC1lFKwmFjyxOIwirI3I3UThBtrdzFxYTqUlTxKqbo9rB/o8YspCptwyFjE2CAiNJjB6rQuerzRRZAmtXd3FWU1RtaRVR1J2FG5HWXfUkaHJYvphJCsdUdFjo3iNY/nqilJ4UgekaUxaNPTH69tHJsAEFm0M2gS3KEmgFTZc7gKkNgghEb6PFGfuBmZZSpKVVP1zirpnVxVMZUrT9DSupe0PONdTVg11t6cvEuZdy7y/jaJwI3U30WbRncOEJM1ppksKN9G0I0PjGMuUscrYu3LVdZ5TNwNTmTCWCUNTUzU78mYmLx2hOTvMs5Q4c9T9Ea0EQgj8FYmQku13WgifrZDreXkj1u9ukUJ8yzBJYsyS0znYpf4o3rKAdVNn9N3GfpB1oF4G/SQ8YcLzdPNT8LpxJkpSxNIwIdIE/4t/Aex47HRbAmljAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;SSR&quot;
        title=&quot;SSR&quot;
        src=&quot;/static/f2b472c4538d630429ea750a36fed823/f058b/SSR.png&quot;
        srcset=&quot;/static/f2b472c4538d630429ea750a36fed823/c26ae/SSR.png 158w,
/static/f2b472c4538d630429ea750a36fed823/6bdcf/SSR.png 315w,
/static/f2b472c4538d630429ea750a36fed823/f058b/SSR.png 630w,
/static/f2b472c4538d630429ea750a36fed823/40601/SSR.png 945w,
/static/f2b472c4538d630429ea750a36fed823/6be49/SSR.png 1160w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;초기 로드시 CSR 에서는 빈껍데기인 div 태그만 보이고
SSR 에서는 헤더가 잘 노출된다.&lt;br/&gt;
SSR 의 대표적인 장점을 여기서 확인할 수 있다.
이제 기본적인 구성을 마쳤다.&lt;br/&gt;
이 프로젝트로 다양한것들을 확장해볼 수 있겠다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[불변성을 이해해보자?]]></title><description><![CDATA[이해를 하며 가졌던 의문들을 나열하며 머릿속에 들어온 개념들을 내 식으로 정리해본다. 
불변성을 모르던 이에게 쉽게 이해시킬 수 있는 수준이 이 글의 목표다. 불변성 ? 불변함을 의미하는 단어이다. 프로그래밍에서 immutability…]]></description><link>https://awaji0829.gatsbyjs.io/about-immutability/</link><guid isPermaLink="false">https://awaji0829.gatsbyjs.io/about-immutability/</guid><pubDate>Wed, 06 Apr 2022 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;이해를 하며 가졌던 의문들을 나열하며 머릿속에 들어온 개념들을 내 식으로 정리해본다. &lt;br/&gt;
불변성을 모르던 이에게 쉽게 이해시킬 수 있는 수준이 이 글의 목표다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3&gt;불변성 ?&lt;/h3&gt;
&lt;p&gt;불변함을 의미하는 단어이다. 프로그래밍에서 immutability는 데이터의 원본이 훼손되는 것을 막는 것을 의미한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;구글에 검색하면 나오는 설명이다.
그래서 원본을 왜 훼손하면 안되는건데?&lt;/p&gt;
&lt;p&gt;일단 주로 실무적으로 사용하고 있는 리액트와 같은 프레임워크, 함수형 프로그래밍이나 디자인 패턴등의 아주 중요한 기초라고 한다.&lt;/p&gt;
&lt;p&gt;리액트를 사용할때 화면이 바뀌는 시점(렌더)이 언제인가? &lt;br/&gt;바로 상태 변경이 이루어 질때다.
그래서 이 상태변경을 어떻게 알아차리는건데? &lt;br/&gt;
바로 불변성 !! 으로 알아차리는 것이다.&lt;/p&gt;
&lt;p&gt;멋모르고 리액트를 무자비하게 배우던 시절 몇가지 기억에 남지만 그 당시 이해못하고 잘 지키던 규칙이 있다.&lt;/p&gt;
&lt;h5&gt;반드시 state를 변경할때 setState를 사용하세요! 직접 state를 변경하면 안됩니다!&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt; - good) setState(&apos;gimbab&apos;)
 - nono) this.state = &apos;gimbab&apos; or state = &apos;gimbab&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;네네! 어렵지 않았고 무조건 상태를 바꾸는 방법은 저 setState를 사용하여 큰 문제 없이 불변성과 함께하였다.&lt;/p&gt;
&lt;p&gt;자, 이제 왜 저 아래의 예시가 안되는지 이해할 차례이다.&lt;/p&gt;
&lt;p&gt;내가 이제껏 신나게 사용했던 setState는 새로운 상태를 인자로 넣으면 무엇을 하고 있는걸까?
기존 상태를 변경하는것이 아닌 유지하되, 새로운 객체! 를 만들고 있는것이다.&lt;/p&gt;
&lt;p&gt;그리고는 그 새로운 객체를 재할당 하고 있는것이다.
이게 불변성과 어떤관련이..? &lt;br/&gt;
하고 잠깐 의문이 드는순간
기존 상태를 변경하지 않는다는 점에 불변성이 유지된다고 !! 이해가 되었다.&lt;/p&gt;
&lt;p&gt;리액트는 렌더하는 기준이 state가 변할때라고 하였다.
이 state 변경을 감지하려먼 우선 이전 상태와 새로운 상태 두가지가 필요하다.&lt;/p&gt;
&lt;p&gt;이전상태를 직접 변경 한다면 ( state = ‘gimbab’ ) 이전상태와 새로운 상태의 변경점을 리액트는 알아차리지 못한다.&lt;/p&gt;
&lt;p&gt;하지만 setState를 사용한다면 새로 들어온 상태로 새로운 객체를 생성하기 때문에 이전 상태와 비교해
달라진 점만 변경할 수 있다. 훨씬 효율적으로 상태를 알아차리기 위한 리액트의 원리라고 한다.&lt;/p&gt;
&lt;p&gt;가볍게 리액트와 불변성의 관계를 훑어 보았다.&lt;/p&gt;
&lt;p&gt;조금 더 자세히 들어가보자면..&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3&gt;기본형 데이터 (Primitive type)&lt;/h3&gt;
&lt;/blockquote&gt;
&lt;p&gt;우선 javascript에서 불변성이 항상 유지되는 데이터타입이 있다.&lt;/p&gt;
&lt;p&gt;기본형 데이터다(number, string, boolean, null, undefined, Symbol)&lt;/p&gt;
&lt;p&gt;어떻게 유지가 돼?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;
우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;빌라&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;우리집에 우선 아파트를 할당을 했다. &lt;br/&gt;그리고 다시 빌라로 재할당을 하였다. &lt;br/&gt;
우선 아파트라고 할당을 한 순간, 땅(메모리 공간) 이 생기고 그리고 아파트가 들어섰다. &lt;br/&gt;&lt;br/&gt;그리고 다시 빌라로 재할당을 했을때,
빌라라는 땅(메모리공간)이 생긴다 그 위에 빌라가 들어섰다. &lt;br/&gt;
기존 땅에 아파트를 부시고 빌라를 재건축 하는것이 아니라..&lt;/p&gt;
&lt;p&gt;이전 집이었던 아파트는 그대로 있겠지.. 이것이 바로 불변성이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;
우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;빌라&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;친구집에 아파트를 할당했다. 아파트는 이미 메모리에 있기 때문에 그 값을 재활용한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;
우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;빌라&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;
친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;빌라&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 다시 친구집에 ‘빌라’를 재할당하였다면..? &lt;br/&gt;우리집에서 ‘빌라’로 이미 만들어진 값이 있기 때문에 &lt;br/&gt;
우리집에 할당되었었던 ‘빌라’의 주소값이 친구집으로도 재할당 된다. 동거..인가?&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3&gt;참조형 데이터 (Reference type)&lt;/h3&gt;
&lt;/blockquote&gt;
&lt;p&gt;-Object (Array, Function , Date, ReqExp, Map, WeakMap, Set, WeakSet)&lt;/p&gt;
&lt;p&gt;데이터 타입에 상관없이 연산이나 할당시 모두 &lt;code class=&quot;language-text&quot;&gt;복제&lt;/code&gt;된다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;다만 기본형은 무엇이 복제되는가? 바로 그 &lt;code class=&quot;language-text&quot;&gt;값의 주소값&lt;/code&gt;이다. &lt;br/&gt; &lt;br/&gt;
그렇다면 참조형은 그 &lt;code class=&quot;language-text&quot;&gt;주소값들이 담긴 공간의 주소값&lt;/code&gt;을 복제한다. &lt;br/&gt;
이 모양새가 마치 참조의 성격이 강해 참조형 데이터라고 명명한것이 아닌가 싶다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;참조형 데이터와 기본형 데이터의 가장 큰 차이점인 &lt;code class=&quot;language-text&quot;&gt;가변성&lt;/code&gt;에 대해 말해보자면 &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;참조형 데이터의 &lt;code class=&quot;language-text&quot;&gt;프로퍼티값&lt;/code&gt; 을 변경했을때 가장 큰 차이점을 보인다. &lt;br/&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//기본형 데이터&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 우리집

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;우리집&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;232323&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; obj1

친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;전원주택&quot;&lt;/span&gt;
obj2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;오피스텔&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 친구집 !== 우리집&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// obj1 === obj2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;우리집에 ‘아파트’를 할당했고 &lt;br/&gt;
친구집에 우리집의 값(= 아파트가 들어선 땅의 주소값)이 할당 되었다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;친구집이 다시 ‘전원주택’으로 재할당 되었다. &lt;br/&gt;
우리집은 여전히 ‘아파트’가 할당되어있다. &lt;br/&gt;
그렇기 때문에 친구집과 우리집은 같지 않다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;참조형 데이터를 보자&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;obj1에 { 우리집: “아파트”, id: 232323 } 객체가 들어섰다.&lt;br/&gt;
여기서 유의해야 할 점은 (기본형데이터와 다른점)&lt;br/&gt; obj1에 저 객체가 담겨져 있는 공간이 하나 더 있다는 것이다. &lt;br/&gt;
그러니까 obj1에 할당하는 값은 저 &lt;code class=&quot;language-text&quot;&gt;객체가 담겨져 있는 주소값&lt;/code&gt; 인 것이다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;그러니까 &lt;br/&gt;
obj2 에는 obj1의 값(저 &lt;code class=&quot;language-text&quot;&gt;객체가 담겨져 있는 주소값&lt;/code&gt;) 이 할당되었고,&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;그 후에 &lt;br/&gt;
&lt;code class=&quot;language-text&quot;&gt;obj2.우리집&lt;/code&gt; 이렇게 객체의 프로퍼티값에 접근하여 변경을 하였다.&lt;br/&gt;
&lt;br/&gt;
이러한 변경은 &lt;code class=&quot;language-text&quot;&gt;객체가 담겨져 있는 주소값&lt;/code&gt;에서 이루어 지고 있는 것이 아닌&lt;br/&gt;
저 객체 안에서 일어나는 것이다. 그렇기 때문에 &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;저렇게 프로퍼티에 접근하여 값을 변경하더라도 &lt;br/&gt;
obj1 와 obj2 가 가리키는 주소값은 여전히 동일하기 때문에 같다!&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//기본형 데이터&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; 친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 우리집

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;우리집&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;232323&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; obj1

친구집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;전원주택&quot;&lt;/span&gt;
obj2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;오피스텔&quot;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//  { 우리집: &quot;오피스텔&quot;, id: 232323 }&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// { 우리집: &quot;오피스텔&quot;, id: 232323 }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;변수 a 의 값을 복사를 하여 변수b 에 할당하고
그 b에 변수 다른 값을 재할당한다.&lt;/p&gt;
&lt;p&gt;그랬을때 기본형 데이터는 b의 값이 변경되더라도 a의 값이 유지된다.&lt;/p&gt;
&lt;p&gt;참조형데이터는 a의 값(객체)를 b에 할당하고 b에서 프로퍼티값에 접근하여 값을 변경하면
a의 값도 변한다. 변한다기 보다는 결국 같은 객체를 바라보고 있기 때문에 같은거다.&lt;/p&gt;
&lt;p&gt;다른객체를 바라본다면 같지 않다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//기본형 데이터&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;우리집&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;232323&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;우리집&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;232323&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

obj2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;우리집 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;오피스텔&quot;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//  { 우리집: &quot;오피스텔&quot;, id: 232323 }&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// { 우리집: &quot;오피스텔&quot;, id: 232323 }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;눈에 보이는게 똑같다고 해서 똑같은게 아니다.
주소를 항상 생각해야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;우리집&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;232323&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; obj2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;우리집&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;아파트&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;232323&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//obj1 !== obj2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;왜 같지 않을까? &lt;br/&gt;우리는 아까 obj1에 할당한 객체의 주소값 그대로 obj2에 할당을 했지만 &lt;br/&gt; &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;이번에는 obj2에 obj1와 안의 프로퍼티 값이 같은 새로운 객체를 &lt;code class=&quot;language-text&quot;&gt;생성&lt;/code&gt;한 것이다. &lt;br/&gt;
생성한다는 것은 저 obj2에 할당할 공간이 새로 만들어졌고 그 공간 안에 저 객체가 들어선 것이다. &lt;br/&gt;
그리고 그 공간은 새로 만들어졌기 때문에 &lt;br/&gt;obj1에 할당되어 있는 저 객체의 주소값과 obj2에 할당되어 있는 주소값이 다른 것이다. &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;물론 저 객체안의 프로퍼티 값은 같은 메모리 공간을 쓰고 있지만 말이다. (기본형 데이터) &lt;br/&gt;&lt;/p&gt;
&lt;h3&gt;마무리&lt;/h3&gt;
&lt;p&gt;이런 개념들을 자바스크립트가 익숙하지 않았을때 훑어 보았던 적이 있다. &lt;br/&gt;
당최 텍스트를 열심히 읽고 있지만 머리속에 그림이 잘 그려지지 않았다. &lt;br/&gt; &lt;br/&gt;
눈 앞에 코드를 쳤을때 돌아가는 모양새를 &lt;br/&gt; 입체적으로 생각하지 못하고 단편적으로 생각했기 때문이다. &lt;br/&gt;
조금 더 자바스크립트가 돌아가는 자세한 개념들을 익히기 시작하자 이러한 것들이 이해가 되기 시작했다.&lt;/p&gt;
&lt;p&gt;당장 이해가 되지 않는다 하여 어렵네~ 하고 피하는 것 보단 끈질기게 시간을 두고 본다면 &lt;br/&gt;
결국에 이해될 일이었다. &lt;br/&gt;&lt;br/&gt; 그러니 뭐든지 겁먹고 피하지 말자. 결국엔 마주해야 될텐데&lt;/p&gt;
&lt;h3&gt;ref&lt;/h3&gt;
&lt;p&gt;코어 자바스크립트 - 정재남&lt;/p&gt;
&lt;!--
[salted duck eggs](https://en.wikipedia.org/wiki/Salted_duck_egg).

![Chinese Salty Egg](./salty_egg.jpg)

You can also write code blocks here!

| Number | Title                                    | Year |
| :----- | :--------------------------------------- | ---: |
| 1      | Harry Potter and the Philosopher’s Stone | 2001 |
| 2      | Harry Potter and the Chamber of Secrets  | 2002 |
| 3      | Harry Potter and the Prisoner of Azkaban | 2004 |

[View raw (TEST.md)](https://raw.github.com/adamschwartz/github-markdown-kitchen-sink/master/README.md)

This is a paragraph.

    This is a paragraph.

# Header 1

## Header 2

    Header 1
    ========

    Header 2
    --------

# Header 1

## Header 2

### Header 3

#### Header 4

##### Header 5

###### Header 6

    # Header 1
    ## Header 2
    ### Header 3
    #### Header 4
    ##### Header 5
    ###### Header 6

# Header 1

## Header 2

ㅇㄹㅇㄹ

### Header 3

#### Header 4

##### Header 5

###### Header 6

    # Header 1 #
    ## Header 2 ##
    ### Header 3 ###
    #### Header 4 ####
    ##### Header 5 #####
    ###### Header 6 ######

&gt; Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.

    &gt; Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.

&gt; ## This is a header.
&gt;
&gt; 1. This is the first list item.
&gt; 2. This is the second list item.
&gt;
&gt; Here&apos;s some example code:
&gt;
&gt;     Markdown.generate();

    &gt; ## This is a header.
    &gt; 1. This is the first list item.
    &gt; 2. This is the second list item.
    &gt;
    &gt; Here&apos;s some example code:
    &gt;
    &gt;     Markdown.generate();

- Red
- Green
- Blue

* Red
* Green
* Blue

- Red
- Green
- Blue

```markdown
- Red
- Green
- Blue

* Red
* Green
* Blue

- Red
- Green
- Blue
```

- `code goes` here in this line
- **bold** goes here

```markdown
- `code goes` here in this line
- **bold** goes here
```

1. Buy flour and salt
1. Mix together with water
1. Bake

```markdown
1. Buy flour and salt
1. Mix together with water
1. Bake
```

1. `code goes` here in this line
1. **bold** goes here

```markdown
1. `code goes` here in this line
1. **bold** goes here
```

Paragraph:
Code



    Paragraph:

        Code

---

---

---

---

---

    * * *

    ***

    *****

    - - -

    ---------------------------------------

This is [an example](http://example.com &quot;Example&quot;) link.

[This link](http://example.com) has no title attr.

This is [an example][id] reference-style link.

[id]: http://example.com &quot;Optional Title&quot;

    This is [an example](http://example.com &quot;Example&quot;) link.

    [This link](http://example.com) has no title attr.

    This is [an example] [id] reference-style link.

    [id]: http://example.com &quot;Optional Title&quot;

_single asterisks_

_single underscores_

**double asterisks**

**double underscores**

    *single asterisks*

    _single underscores_

    **double asterisks**

    __double underscores__

This paragraph has some `code` in it.

    This paragraph has some `code` in it.

![Alt Text](https://placehold.it/200x50 &quot;Image Title&quot;)

    ![Alt Text](https://placehold.it/200x50 &quot;Image Title&quot;) --&gt;</content:encoded></item><item><title><![CDATA[구형을 신형으로 - adoptor pattern]]></title><description><![CDATA[…]]></description><link>https://awaji0829.gatsbyjs.io/about-adoptor-pattern/</link><guid isPermaLink="false">https://awaji0829.gatsbyjs.io/about-adoptor-pattern/</guid><pubDate>Wed, 06 Apr 2022 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;개발을 하다보면 좋은 방법론들이 많이 있다. &lt;br/&gt;
그리고 그 방법론들을 많이 알고 잘 알수록 무엇이 현재 상황이 맞는지 판단할 수 있다고 생각한다. (나도 잘 알고싶다) &lt;br/&gt;&lt;/p&gt;
&lt;p&gt;우리는 항상 기술부채와 싸운다. 나도 현업에서 어마어마한 기술부채와 함께 하고 있다.(물론 나도 생산중이겠지)&lt;br/&gt;
개발자가 아닌 회사 팀원들은 기술부채라는 단어에 크게 공감하거나 동의하지 않을 수 있다.&lt;br/&gt;
매일 이래도 되나 하면서 움직이는 하울의 성에 방 하나를 올린적이 허다하다&lt;br/&gt;
그렇게 점점 커져가는 죄책감과 밀려드는 기술개발 일정사이에서 딜레마에 항상 빠지곤 한다. &lt;br/&gt;
이대로 가선 안돼..! 이러다 다 죽어 ! &lt;br/&gt;할 것 같지만 용케 무너지지 않고 꾸역꾸역 서버에서 이쁜 옷 입고 숨 쉬고 있는 코드들.
&lt;br/&gt;&lt;br/&gt;
이것들은 기술부채인가? 그럼 기술부채가 없는 프로젝트가 있을까?&lt;br/&gt;
그때는 맞고 지금은 틀리다를 시전하는 나를 보면서 꽤나 속이 울렁거렸던적도 많다.&lt;br/&gt;
그때는 그때의 개발일정과 구현해내야만 하는 사명감이 있었고&lt;br/&gt; 그것들은 소비자와 만나 가치를 생산해내고 있다.&lt;br/&gt;
그럼 그것들은 기술부채가 아니라 기술투자가 아니냐는 구절을 책에서 읽었고 머리가 띵했다.&lt;br/&gt;
그렇다 그건 부채가 아니라 투자였고 그만큼의 효용이 있었다면 그게 맞는 기술이라는 것이다.&lt;br/&gt;
다만 이렇게 만들어낸 결과물들을 확장해 낼 수 없다면&lt;br/&gt; 그때부터 부채라고 불리울 것이다. &lt;br/&gt;
나는 이러한 간극을 최소화 하고 싶었다. &lt;br/&gt; &lt;br/&gt;
그 중에서 하나의 방법론을 도입하고 있다.&lt;/p&gt;
&lt;h4&gt;Adopter Pattern&lt;/h4&gt;
&lt;p&gt;채팅개발을 하던 중 시안과는 다른 요구사항이 추가로 떨어 졌다.&lt;br/&gt; 차트를 넣어주세요 테이블을 넣어주세요&lt;br/&gt;&lt;br/&gt; 정말 생각지도 못했던 요구고 백엔드 측에서도 테이블을 다시 갈아 엎어야 되는 상황이 왔다 &lt;br/&gt;
갈아 엎지 않으려면 기존에 있던 필드 아래로 줄줄이 다른 성격의 필드들을 추가하는 방법뿐,, 나중에 되면 다시 리팩토링을 하겠지만 또 영원히 바뀌지 않을 수도 있다&lt;br/&gt; 그리고 그 변화에 대응하다보면 &lt;br/&gt; 내가 짠 코드들은 점점 추가되는 기능들 속에서 처음 의도했던 것과는 다르게 뒤죽박죽 코드가 작성 돼 있을 수 있다. &lt;br/&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[도커 명령어 정리]]></title><description><![CDATA[도커허브 도커 이미지 저장소 역할 이미지 다운 특정 태그 이미지 다운 이미지 다운 확인  이미지 삭제 중단된 이미지 삭제시 - 컨테이너를 실행시 삭제 못함. 컨데이너에서 사용하고 있는 전체 이미지 이미지를 통해서 컨테이너 실행 create…]]></description><link>https://awaji0829.gatsbyjs.io/about-docker/</link><guid isPermaLink="false">https://awaji0829.gatsbyjs.io/about-docker/</guid><pubDate>Wed, 06 Apr 2022 22:12:03 GMT</pubDate><content:encoded>&lt;h5&gt;도커허브&lt;/h5&gt;
&lt;p&gt;도커 이미지 저장소 역할&lt;/p&gt;
&lt;h5&gt;이미지 다운&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker pull 이미지명&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;특정 태그 이미지 다운&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker pull 이미지명:태그명&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;이미지 다운 확인&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker image ls&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;REPOSITORY : 이미지명
TAG : 버전
IMAGE ID : 이미지 고유 id
CREATED : 이미지 만든 날짜
SIZE : 이미지 크기
STATUS : up 실행된시간&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;이미지 삭제&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker image rm IMAGE ID(일부만 쳐도 됨)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;중단된 이미지 삭제시 - 컨테이너를 실행시 삭제 못함.&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker image rm -f 443&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;컨데이너에서 사용하고 있는 전체 이미지&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker image rm $(docker image -q)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;이미지를 통해서 컨테이너 실행&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker create nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;create + start (foreground)&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker run nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;create + start (background)&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker run -d nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;create + start + 컨테이너 명명 (background)&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker run -d --name awaji nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;포그라운드&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;내가 실행시킨 프로그램의 내용이 화면에서 실행되고 출력되는 상태&lt;/li&gt;
&lt;li&gt;상태를 즉각적으로 확인할 수 있는 상태&lt;/li&gt;
&lt;/ul&gt;
&lt;h5&gt;백그라운드&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;내가 실행시킨 프로그램이 컴퓨터 내부적으로 실행되는 상태&lt;/li&gt;
&lt;/ul&gt;
&lt;h5&gt;호스트 포트 4000 과 컨테이너 포트 80 연결&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;서로 네트워크가 분리되어 있기 때문에 외부=&gt;호스트 포트와 호스트-컨테이너 포트를 연결한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker run -d -p 4000:80 nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;실행중인 컨테이너 조회&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker ps&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;실행+중단 컨테이너 조회&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker ps -a&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;도커 강제종료&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker kill&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;도커 로그조회&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker logs 컨테이너 id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;-마지막 열줄만&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker logs --tail 10 컨테이너 id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;-기존거 + 실시간 조회&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt; docker logs --tail 0 -f  3a9&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;-기존거 없이 실시간만&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt; docker logs --tail 0 -f  3a9&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;내부 컴퓨터 환경 접속&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;실행중만 접근가능&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;docker exec -it 컨테이너Id bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;나가기&lt;/h5&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;exit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;도커 볼륨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;호스트의 저장공간을 공유한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;종료된 컨테이너 디버깅 팁&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;n초동안 시스템을 일시정지 시킨다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;
ENTRYPOINT [&quot;/bin/bash&quot; , &quot;-c&quot; , &quot;sleep n&quot;]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;/h3&gt;
&lt;p&gt;ENTRYPOINT : 컨테이너가 최초로 실행할때, 생성된 직후 수행되는 명령어. - 컨테이너 실행시
RUN : 이미지 생성과정!에서 실행할 명령어 - 이미지 생성과정시
WORKDIR : 특정 디렉토리 지정
EXPOSE : 문서화 역할&lt;/p&gt;</content:encoded></item></channel></rss>